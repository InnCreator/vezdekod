# vezdekod adnroid App

## О проекте

Приложения написано в рамках хакатона от ВК. Всего было пять заданий, и сейчас проедмся по каждому


## Задание 1

> Реализуйте плеер для вертикальных видео: поддержите выбор файла с устройства, его проигрывание, паузу и перемотку. Итоговое видео сохраняйте на устройство.

Был реализован плеер используя классическую библиотеку андроида `MediaPlayer`. Выбор файла идет из галлери путем явнго интента, который ожидает увидеть видео файлы. 

---
![scr1](https://skr.sh/i/051121/KR3Kg9Nh.jpg?download=1&name=Скриншот%2005-11-2021%2018:23:06.jpg)![scr2](https://skr.sh/i/051121/b5NSX4K1.jpg?download=1&name=Скриншот%2005-11-2021%2018:52:34.jpg)
---

Когда видео файл загружен, пользователю предлагается воспроизвести его нажатием на клавишу `Play`. Можно поставить видео на паузу нажав на ту же клавишу. Снизу есть ползунок реализованный `SeekBar`. Он привязан к хронометражу, им можно мотать видео
![scr3](https://skr.sh/i/051121/NnmvQ3Cp.jpg?download=1&name=Скриншот%2005-11-2021%2018:36:49.jpg)
В верхнем правом углу есть непримечательная галочка, по нажатию на нее видео сохраняется в `DCIM/vezdekod/`. После эти видео можно использовать в этом же видеоредакторе

## Задание 2

>Поддержите кроп (обрезку видео по длительности и размеру), зум и перемещение видео (и то, и другое — используя pinch to zoom, без поворота видео).

Для работы с видео была использованна библиотека [ffmpeg kit](https://github.com/tanersener/ffmpeg-kit). Был создан отдельный репозиторий в приложении [FFmpegRepo](https://github.com/InnCreator/vezdekod/blob/github_plohoi/app/src/main/java/ru/inncreator/vezdekod/utils/FFmpegRepo.kt) и подлкючен DI Koin. Данный класс отвечает за обработку видео. В нем есть метод Сейв и методы для каждого видоизменения видео. В качестве UI состовляющей был использован `SeekBar` и `RangeSlider`
Для зума и перемещения по видео(и не только) был создан класс [SelectedScaleView](https://github.com/InnCreator/vezdekod/blob/github_plohoi/app/src/main/java/ru/inncreator/vezdekod/utils/SelectedScaleView.kt). Класс позволяет выбрать вьюшку внутри контейнера и используя прикосновения двигать и масштабировтаь любые объекты внутри контейнера. Планировалось расширить его на повороты, но Я не успел :С 
Также для удобства с этого задания видео запускалось само и зацикливалось.
![scr4](https://skr.sh/i/051121/whrNgA29.jpg?download=1&name=Скриншот%2005-11-2021%2018:53:24.jpg)
В верхнем правом углу появилась кнопочка сейв, которая более явно определяет свое предназночение. Так же был обнаружен баг с наложением экрана Кропа с Магической палочкой. Связан с тем, что менюшку Я делал быстро и не внимтаельно после решения 2 задачи :(

## Задание 3
> Добавьте несколько простых визуальных эффектов:
> -fade in / fade out (появление и затухание всего видео и его звука);
> -зацикливание;
> -эффект бумеранга;
> -замедление видео.

Был добавлен выбор лупа и бумеранга на сохраненное видео.

## Итоги
К сожалению Я потратил много времени на UI и глупые ошибки. Написал две утилиты для решениях большенства проблем. Приложения легко расширяемое. При хорошем знании ffmpeg'a можно быстро наклепать любые эффекты и подключить к приложению
